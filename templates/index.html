<!DOCTYPE html>
<html>
<head>
    <title>Hybrid Cardiovascular Risk Intelligence</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        body {
            background-color: #f4f7fb;
            font-family: 'Segoe UI', sans-serif;
        }

        .card-custom {
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05);
            padding: 30px;
            background: white;
        }

        .risk-high { color: #dc3545; font-weight: bold; }
        .risk-elevated { color: #fd7e14; font-weight: bold; }
        .risk-borderline { color: #ffc107; font-weight: bold; }
        .risk-low { color: #198754; font-weight: bold; }

        h1 {
            font-weight: 600;
            margin-bottom: 30px;
        }

        .btn-custom {
            background: #0066ff;
            border-radius: 10px;
            padding: 10px 20px;
            border: none;
        }

        .btn-custom:hover {
            background: #004ecc;
        }

        .ai-output h3 {
            margin-top: 20px;
        }

        .ai-output ul {
            padding-left: 20px;
        }
    </style>
</head>

<body>

<div class="container mt-5">

    <h1>Hybrid AI Cardiovascular Risk Screening</h1>

    <div class="card card-custom mb-4">
        <form action="/predict" method="post" class="row g-3">

           <form action="/predict" method="post" class="row g-3">

    <!-- Age -->
    <div class="col-md-4">
        <label>Age</label>
        <input type="number" class="form-control" name="age" required>
    </div>

    <!-- Gender -->
    <div class="col-md-4">
        <label>Gender</label>
        <select class="form-control" name="gender" required>
            <option value="1">Female</option>
            <option value="2">Male</option>
        </select>
    </div>

    <!-- BMI -->
    <div class="col-md-4">
        <label>BMI</label>
        <input type="number" step="0.1" class="form-control" name="bmi" required>
    </div>

    <!-- Blood Pressure -->
    <div class="col-md-4">
        <label>Systolic BP (ap_hi)</label>
        <input type="number" class="form-control" name="ap_hi" required>
    </div>

    <div class="col-md-4">
        <label>Diastolic BP (ap_lo)</label>
        <input type="number" class="form-control" name="ap_lo" required>
    </div>

    <!-- Cholesterol -->
    <div class="col-md-4">
        <label>Cholesterol Level</label>
        <select class="form-control" name="cholesterol" required>
            <option value="1">Normal</option>
            <option value="2">Above Normal</option>
            <option value="3">Well Above Normal</option>
        </select>
    </div>

    <!-- Glucose -->
    <div class="col-md-4">
        <label>Blood Glucose</label>
        <select class="form-control" name="gluc" required>
            <option value="1">Normal</option>
            <option value="2">Above Normal</option>
            <option value="3">Well Above Normal</option>
        </select>
    </div>

    <!-- Smoking -->
    <div class="col-md-4">
        <label>Smoking</label>
        <select class="form-control" name="smoke" required>
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </div>

    <!-- Alcohol -->
    <div class="col-md-4">
        <label>Alcohol Intake</label>
        <select class="form-control" name="alco" required>
            <option value="0">No</option>
            <option value="1">Yes</option>
        </select>
    </div>

    <!-- Physical Activity -->
    <div class="col-md-4">
        <label>Physically Active</label>
        <select class="form-control" name="active" required>
            <option value="1">Yes</option>
            <option value="0">No</option>
        </select>
    </div>

    <!-- Genetic -->
    <div class="col-md-4">
        <label>First-degree Relatives with CVD</label>
        <select class="form-control" name="relatives" required>
            <option value="0">None</option>
            <option value="1">One</option>
            <option value="2">Two or More</option>
        </select>
    </div>

    <div class="col-12 mt-3">
        <button type="submit" class="btn btn-primary btn-custom">
            Predict Risk
        </button>
    </div>

</form>


        </form>
    </div>

    {% if prediction %}
    <div class="card card-custom mb-4 text-center">

        <h2>Estimated Risk</h2>
        <h1 class="risk-high">{{ prediction }}%</h1>

        <canvas id="riskChart" width="200" height="200"></canvas>

    </div>
    {% endif %}

    {% if ai_text %}
    <div class="card card-custom ai-output">
        <h2>Personalized Guidance</h2>
        {{ ai_text | safe }}
    </div>
    {% endif %}

</div>

{% if prediction %}
<script>
    const riskValue = Number("{{ prediction }}");

    const ctx = document.getElementById('riskChart');

    new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Risk', 'Remaining'],
            datasets: [{
                data: [riskValue, 100 - riskValue],
                backgroundColor: ['#dc3545', '#e9ecef'],
                borderWidth: 0
            }]
        },
        options: {
            cutout: '70%',
            plugins: {
                legend: {
                    display: false
                }
            }
        }
    });
</script>


{% endif %}

</body>
</html>
